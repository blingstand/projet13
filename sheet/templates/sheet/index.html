{% extends 'core/base.html' %}
{% block content %}
<section>
	<h2 class="mt-5 pl-5">Page Fiches</h2>
	<article class="mt-5 container">
		{% csrf_token %} 
		<div class="row">
			<div class="col-2"></div>
			{% for elem in button_value %}
			<div class="col-2 bg-primary text-center">
				<button id="{{elem.id}}" onclick="{{elem.function}}">{{elem.name}}</button>
			</div>
			{% endfor %}
			<div class="col-2"></div>
			<div class="col-12 mb-5 text-center">
				<button>imprimer</button>
			</div>
			<table>
				<form action="">
					<tr>
						<td>&nbsp;</td>
						<td>nom</td>
						<td>statut animal</td>
						<td>espèce</td>
						<td>race</td>
						<td>propriétaire</td>
						<td>statut propriétaire</td>
						<td>tel</td>
						<td>num dossier</td>
						<td>num tatouage</td>
						<td>num puce</td>
					</tr>
					{% for sheet in sheets %}
					<tr class="col-12 text-center {% cycle 'row1' 'row2' %}">
						<!-- nom sexe/espece status propriétaire num-dossier num-tatoo num-puce -->
						<td><input type="checkbox" id='{{sheet.animal_id}}'></td>
						<td>{{sheet.name}}</a></td>
						<td>{{sheet.status}}</td>
						<td>{{sheet.species}}</td>
						<td>{{sheet.race}}</td>
						<td>{{sheet.owner}} </td>
						<td>{{sheet.owner_status}}</td>
						<td>{{sheet.owner.phone}}</td>
						<td>{{sheet.admin_data.file}}</td>
						<td>{{sheet.admin_data.tatoo}}</td>
						<td>{{sheet.admin_data.chip}}</td>						
					</tr>
					{% endfor %}
				</form>
			</table>
		</div>
	</article>
</article>
<script type="text/javascript">
	function add(){
		add_page = window.location + "add"
		window.location.href = add_page; 
	}
	function alter(){
		//verification only 1 sheet selected
		checkbox = document.querySelectorAll('input[type=checkbox]');
		count = 0; 
		for (i=0; i < checkbox.length; i ++){
			console.log(count)
			if (checkbox[i].checked){
				console.log('+1')
				count ++;}
		}
		if (count == 0){
			alert('sélectionnez une fiche à modifier !')
		}else if (count == 1){
			add_page = window.location + "alter";
			window.location.href = add_page; 
		}else{
			alert("trop de fiches sélectionnées (" + count + ").")
		}

	}
	function classify(){
		alert('classify') 
	}
	function drop(){
		alert('drop') 
	}
</script>
{% endblock  %}

