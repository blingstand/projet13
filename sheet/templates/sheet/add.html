{% extends 'core/base.html' %}
{% block content %}
<section>
	<h2 class="mt-5 pl-5">Page Ajout Fiche</h2>
	<article class="mt-5 bg-blue">
		<form class="sheet" action="" method="post" enctype="multipart/form-data">
			{% csrf_token %}
			<div class="container">
				<div class="row">
					<div class="col-8 bg-yellow container">
						<div class="row">
							<div class="col-3 text-center">{{form.name.label}} <br><br>{{form.name}}</div>
							<div class="col-3 text-center">{{form.date_of_birth.label}}<br> 
								<span id='span_today_1' class=" text-blue curs-pointer" onclick="today(this)">(aujourd'hui)</span> <br>{{form.date_of_birth}}</div>
							<div class="col-3 text-center">{{form.date_of_adoption.label}}<br> 
								 <span id='span_today_2' class=" text-blue curs-pointer" onclick="today(this)">(aujourd'hui)</span> <br>{{form.date_of_adoption}}</div>
							<div class="col-3 text-center">{{form.date_of_neuter.label}}<br> 
								<span id='span_today_3' class=" text-blue curs-pointer" onclick="today(this)">(aujourd'hui)</span> <br>{{form.date_of_neuter}}</div>
						</div>
						<div class="row">
							<div class="col-6" >
								<div class="row">
									<div class="col-6 bg-primary"> {{form.species}}</div>
									<div class="col-6 bg-primary" id='inputDateZone' > {{form.is_neutered}}</div>
								</div>
							</div>
							<div class="col-6 bg-secondary text-center">
								<p>{{form.race.label}} {{form.race}}</p>
								<p>{{form.color.label}}  {{form.color}}</p>
								<p>{{form.observation.label}} {{form.observation}}</p>
							</div>
						</div>
						<div class="row">
							<div class="col-4 text-center">{{form.file.label}}<br/> {{form.file}}</div>
							<div class="col-4 text-center">{{form.tatoo.label}}<br/> {{form.tatoo}}</div>
							<div class="col-4 text-center">{{form.chip.label}}<br/> {{form.chip}}</div>
						</div>
						<div class="row">
							<div class="col-4 text-center">{{form.caution.label}}<br/> {{form.caution}}</div>
							<div class="col-4 text-center">{{form.mail_reminder.label}}<br/> {{form.mail_reminder}}</div>
							<div class="col-4 text-center">{{form.tel_reminder.label}}<br/> {{form.tel_reminder}}</div>
						</div>
						<div class="row">
							<div class="col-4 text-center">{{form.owner_name.label}}<br/> {{form.owner_name}}</div>
							<div class="col-4 text-center">{{form.owner_surname.label}}<br/> {{form.owner_surname}}</div>
							<div class="col-4 text-center">{{form.owner_sex}}</div>
						</div>
						<div class="row">
							<div class="col-1"></div>
							<div class="col-4 text-center">{{form.phone.label}}<br/> {{form.phone}}</div>
							<div class="col-7 mb-2 text-center">{{form.mail.label}}<br/> {{form.mail}}</div>
						</div>
					</div>			
					<div class="col-4 bg-green">
						<div class="container">
							<div class="row">
								<div class="col-12 text-center">{{form.status}}</div>
								<div class="col-8"></div>
								<div class="col-4">
									<input type="submit"class="btn btn-primary big-btn" value="Enregistrer">
								</div>
								<div class="col-12">
									{% if error %}
									<p> {{error}}</p>
									{% endif %}
								</div>
							</div>
						</div>
					</div>
				</div>			
			</div>
		</form>
	</article>
	<script type="text/javascript">
		let is_neutered_button = document.getElementById("id_is_neutered_0")
		is_neutered_button.checked = true
		let species0_button = document.getElementById('id_species_0')
		species0_button.checked = true
		let owner_sex_button = document.getElementById("id_owner_sex_0")
		owner_sex_button.checked = true
		
		const today = function(elem) {
			let today = new Date();
			let month = today.getMonth()+1
			if (month <= 9) {
				month = '0' + String(month)}
			let date = today.getDate()+'/'+month+'/'+today.getFullYear();
			let input = elem.nextElementSibling.nextElementSibling
			input.value = date
			
		}
		function appearNewInput(){
			//create an input date
			let divDate = document.createElement("div");
			divDate.innerHTML = '{{form.futur_date_of_neuter.label}}{{form.futur_date_of_neuter}}'
			divDate.classList.add("d-none")
			divDate.id = "divDate"
			document.getElementById('inputDateZone').appendChild(divDate);

		}
		document.getElementById("id_is_neutered").addEventListener('click', function(e){
			if(document.getElementById('id_is_neutered_2').checked){
				document.getElementById('divDate').classList.replace('d-none', "d-flex")
			}else{
				document.getElementById('divDate').classList.replace('d-flex', "d-none")
			}
		})
		document.getElementById("id_mail_reminder").value = 0
		document.getElementById("id_tel_reminder").value = 0
		appearNewInput()
	</script>
	{% endblock  %}

